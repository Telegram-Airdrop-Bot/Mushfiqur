(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[757],{2515:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>ec});var a=t(7876),r=t(4232),l=t(2849),i=t(8307),n=t(4725),d=t(7041),c=t(8605),o=t(7297),m=t(395),u=t(5390),h=t(1449),x=t(6124),j=t(5037),p=t(7396),v=t(727),g=t(5682),f=t(8971),N=t(7739),y=t(9285),b=t(710),w=t(498),_=t(2341),S=t(3609),k=t(1312),C=t(9750),A=t(6973),F=t(9116),E=t(6257),P=t(1758),D=t(2347),U=t(5450),$=t(3654),J=t(741),R=t(5597);let O=()=>{let[e,s]=(0,r.useState)([]),[t,i]=(0,r.useState)([]),[c,o]=(0,r.useState)(!0),[m,h]=(0,r.useState)(""),[x,j]=(0,r.useState)("all"),[p,O]=(0,r.useState)("all"),[T,I]=(0,r.useState)(null),[q,L]=(0,r.useState)(!1),[z,Z]=(0,r.useState)(null),{toast:B}=(0,n.dj)(),M=[{id:"1",customer_name:"John Doe",customer_email:"john@example.com",customer_telegram:"@johndoe",project_description:"Need a bot for my online store with payment integration and inventory management",service_type:"E-commerce Telegram Bot",budget_range:"$1000-$2000",timeline:"2-3 weeks",status:"pending",payment_method:"crypto",payment_status:"pending",project_requirements:["Payment Integration","Database Integration","Admin Dashboard"],admin_notes:null,delivery_date:null,project_files:null,payment_proof:null,created_at:"2025-01-15T10:30:00Z",updated_at:"2025-01-15T10:30:00Z"},{id:"2",customer_name:"Jane Smith",customer_email:"jane@example.com",customer_telegram:"@janesmith",project_description:"Automated trading bot with risk management and multiple exchange support",service_type:"Crypto Trading Bot",budget_range:"$2000-$3000",timeline:"3-4 weeks",status:"in_progress",payment_method:"bkash",payment_status:"paid",project_requirements:["API Integration","Real-time Updates","Risk Management"],admin_notes:"Payment received, started development",delivery_date:"2025-02-15T00:00:00Z",project_files:null,payment_proof:null,created_at:"2025-01-14T15:45:00Z",updated_at:"2025-01-15T09:20:00Z"},{id:"3",customer_name:"Mike Johnson",customer_email:"mike@example.com",customer_telegram:"@mikejohnson",project_description:"Bot for managing my Discord server with moderation and engagement features",service_type:"Discord Community Manager",budget_range:"$800-$1500",timeline:"1-2 weeks",status:"completed",payment_method:"nagad",payment_status:"paid",project_requirements:["User Authentication","Moderation Tools","Analytics"],admin_notes:"Project completed and delivered successfully",delivery_date:"2025-01-13T16:30:00Z",project_files:{source_code:"https://github.com/example/discord-bot",documentation:"https://docs.example.com/discord-bot",demo:"https://demo.example.com/discord-bot"},payment_proof:null,created_at:"2025-01-10T12:00:00Z",updated_at:"2025-01-13T16:30:00Z"}],V=async()=>{try{console.log("Starting to fetch orders from Supabase..."),o(!0);let{data:e,error:t}=await l.N.from("orders").select("*").order("created_at",{ascending:!1});if(console.log("Supabase orders response:",{data:e,error:t}),t)console.error("Error fetching orders:",t),console.log("Falling back to mock data due to error"),s(M),i(M);else{console.log("Successfully fetched orders from Supabase:",e);let t=(e||[]).map(e=>({...e,payment_method:e.payment_method||"pending",payment_status:e.payment_status||"pending",project_requirements:e.project_requirements||[],admin_notes:e.admin_notes||null,delivery_date:e.delivery_date||null,project_files:e.project_files||null,payment_proof:e.payment_proof||null}));s(t),i(t)}}catch(e){console.error("Error fetching orders:",e),console.log("Falling back to mock data due to exception"),s(M),i(M)}finally{o(!1)}};(0,r.useEffect)(()=>{V()},[]),(0,r.useEffect)(()=>{let s=e;m&&(s=s.filter(e=>{var s;return e.customer_name.toLowerCase().includes(m.toLowerCase())||e.project_description.toLowerCase().includes(m.toLowerCase())||(null==(s=e.customer_telegram)?void 0:s.toLowerCase().includes(m.toLowerCase()))})),"all"!==x&&(s=s.filter(e=>e.status===x)),"all"!==p&&(s=s.filter(e=>e.payment_status===p)),i(s)},[e,m,x,p]);let W=async(t,a)=>{try{let{error:r}=await l.N.from("orders").update({status:a,updated_at:new Date().toISOString()}).eq("id",t);if(r){console.error("Error updating order status:",r),B({title:"Update Failed",description:"Failed to update order status. Please try again.",variant:"destructive"});return}s(e=>e.map(e=>e.id===t?{...e,status:a,updated_at:new Date().toISOString()}:e)),i(e=>e.map(e=>e.id===t?{...e,status:a,updated_at:new Date().toISOString()}:e));let n=e.find(e=>e.id===t);n&&await (0,R.Sw)(n,a),B({title:"Status Updated",description:"Order status updated to ".concat(a)})}catch(e){console.error("Error updating order status:",e),B({title:"Update Failed",description:"Failed to update order status. Please try again.",variant:"destructive"})}},H=async(t,a)=>{try{let{error:r}=await l.N.from("orders").update({payment_status:a,updated_at:new Date().toISOString()}).eq("id",t);if(r){console.error("Error updating payment status:",r),B({title:"Update Failed",description:"Failed to update payment status. Please try again.",variant:"destructive"});return}s(e=>e.map(e=>e.id===t?{...e,payment_status:a,updated_at:new Date().toISOString()}:e)),i(e=>e.map(e=>e.id===t?{...e,payment_status:a,updated_at:new Date().toISOString()}:e));let n=e.find(e=>e.id===t);n&&await (0,R.xz)(n,a),B({title:"Payment Status Updated",description:"Payment status updated to ".concat(a)})}catch(e){console.error("Error updating payment status:",e),B({title:"Update Failed",description:"Failed to update payment status. Please try again.",variant:"destructive"})}},G=async(e,t)=>{try{let{error:a}=await l.N.from("orders").update({...t,updated_at:new Date().toISOString()}).eq("id",e);if(a){console.error("Error updating order details:",a),B({title:"Update Failed",description:"Failed to update order details. Please try again.",variant:"destructive"});return}s(s=>s.map(s=>s.id===e?{...s,...t,updated_at:new Date().toISOString()}:s)),i(s=>s.map(s=>s.id===e?{...s,...t,updated_at:new Date().toISOString()}:s)),B({title:"Order Updated",description:"Order details updated successfully"}),Z(null)}catch(e){console.error("Error updating order details:",e),B({title:"Update Failed",description:"Failed to update order details. Please try again.",variant:"destructive"})}},X=(e,s)=>{switch(s){case"accept":W(e.id,"accepted");break;case"start":W(e.id,"in_progress");break;case"review":W(e.id,"review");break;case"complete":W(e.id,"completed");break;case"cancel":W(e.id,"cancelled");break;case"mark_paid":H(e.id,"paid");break;case"mark_failed":H(e.id,"failed");break;case"view":I(e),L(!0);break;case"edit":Z(e);break;case"deliver":Y(e)}},Y=async e=>{let s={source_code:prompt("Enter source code URL:"),documentation:prompt("Enter documentation URL:"),demo_url:prompt("Enter demo URL:"),installation_guide:prompt("Enter installation guide:"),admin_notes:prompt("Enter delivery notes:")};if(s.source_code){let t={source_code:s.source_code,documentation:s.documentation,demo_url:s.demo_url,installation_guide:s.installation_guide,delivered_at:new Date().toISOString()};await G(e.id,{status:"completed",project_files:t,delivery_date:new Date().toISOString(),admin_notes:s.admin_notes}),await (0,R.pC)(e,s),B({title:"Project Delivered",description:"Project has been delivered and customer notified"})}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold",children:"Orders Management"}),(0,a.jsxs)(d.$,{onClick:()=>{V()},disabled:c,children:[(0,a.jsx)(k.A,{className:"w-4 h-4 mr-2 ".concat(c?"animate-spin":"")}),"Refresh"]})]}),(0,a.jsxs)(v.Zp,{children:[(0,a.jsx)(v.aR,{children:(0,a.jsxs)(v.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(P.A,{className:"w-5 h-5"}),"Filters"]})}),(0,a.jsx)(v.Wu,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Search"}),(0,a.jsx)(f.p,{placeholder:"Search orders...",value:m,onChange:e=>h(e.target.value),className:"mt-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Status"}),(0,a.jsxs)(y.l6,{value:x,onValueChange:j,children:[(0,a.jsx)(y.bq,{className:"mt-1",children:(0,a.jsx)(y.yv,{})}),(0,a.jsxs)(y.gC,{children:[(0,a.jsx)(y.eb,{value:"all",children:"All Statuses"}),(0,a.jsx)(y.eb,{value:"pending",children:"Pending"}),(0,a.jsx)(y.eb,{value:"accepted",children:"Accepted"}),(0,a.jsx)(y.eb,{value:"in_progress",children:"In Progress"}),(0,a.jsx)(y.eb,{value:"review",children:"Review"}),(0,a.jsx)(y.eb,{value:"completed",children:"Completed"}),(0,a.jsx)(y.eb,{value:"cancelled",children:"Cancelled"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Payment Status"}),(0,a.jsxs)(y.l6,{value:p,onValueChange:O,children:[(0,a.jsx)(y.bq,{className:"mt-1",children:(0,a.jsx)(y.yv,{})}),(0,a.jsxs)(y.gC,{children:[(0,a.jsx)(y.eb,{value:"all",children:"All Payment Statuses"}),(0,a.jsx)(y.eb,{value:"pending",children:"Pending"}),(0,a.jsx)(y.eb,{value:"paid",children:"Paid"}),(0,a.jsx)(y.eb,{value:"failed",children:"Failed"}),(0,a.jsx)(y.eb,{value:"refunded",children:"Refunded"})]})]})]}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsx)(d.$,{variant:"outline",onClick:()=>{h(""),j("all"),O("all")},className:"w-full",children:"Clear Filters"})})]})})]}),(0,a.jsxs)(v.Zp,{children:[(0,a.jsx)(v.aR,{children:(0,a.jsxs)(v.ZB,{children:["Orders (",t.length,")"]})}),(0,a.jsx)(v.Wu,{children:c?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(k.A,{className:"w-8 h-8 animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{children:"Loading orders..."})]}):0===t.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(u.A,{className:"w-8 h-8 mx-auto mb-4 text-gray-400"}),(0,a.jsx)("p",{children:"No orders found"})]}):(0,a.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,a.jsx)("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg",children:e.customer_name}),(e=>{switch(e){case"pending":return(0,a.jsxs)(g.E,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:[(0,a.jsx)(b.A,{className:"w-3 h-3 mr-1"}),"Pending"]});case"accepted":return(0,a.jsxs)(g.E,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:[(0,a.jsx)(w.A,{className:"w-3 h-3 mr-1"}),"Accepted"]});case"in_progress":return(0,a.jsxs)(g.E,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:[(0,a.jsx)(b.A,{className:"w-3 h-3 mr-1"}),"In Progress"]});case"review":return(0,a.jsxs)(g.E,{variant:"secondary",className:"bg-purple-100 text-purple-800",children:[(0,a.jsx)(_.A,{className:"w-3 h-3 mr-1"}),"Review"]});case"completed":return(0,a.jsxs)(g.E,{variant:"secondary",className:"bg-green-100 text-green-800",children:[(0,a.jsx)(w.A,{className:"w-3 h-3 mr-1"}),"Completed"]});case"cancelled":return(0,a.jsxs)(g.E,{variant:"secondary",className:"bg-red-100 text-red-800",children:[(0,a.jsx)(S.A,{className:"w-3 h-3 mr-1"}),"Cancelled"]});default:return(0,a.jsx)(g.E,{variant:"secondary",children:e})}})(e.status),(e=>{switch(e){case"pending":return(0,a.jsxs)(g.E,{variant:"outline",className:"border-yellow-300 text-yellow-700",children:[(0,a.jsx)(b.A,{className:"w-3 h-3 mr-1"}),"Pending"]});case"paid":return(0,a.jsxs)(g.E,{variant:"outline",className:"border-green-300 text-green-700",children:[(0,a.jsx)(w.A,{className:"w-3 h-3 mr-1"}),"Paid"]});case"failed":return(0,a.jsxs)(g.E,{variant:"outline",className:"border-red-300 text-red-700",children:[(0,a.jsx)(S.A,{className:"w-3 h-3 mr-1"}),"Failed"]});case"refunded":return(0,a.jsxs)(g.E,{variant:"outline",className:"border-gray-300 text-gray-700",children:[(0,a.jsx)(k.A,{className:"w-3 h-3 mr-1"}),"Refunded"]});default:return(0,a.jsx)(g.E,{variant:"outline",children:e})}})(e.payment_status),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[(e=>{switch(e){case"crypto":return(0,a.jsx)(C.A,{className:"w-4 h-4 text-orange-500"});case"bkash":return(0,a.jsx)(A.A,{className:"w-4 h-4 text-blue-500"});case"nagad":return(0,a.jsx)(A.A,{className:"w-4 h-4 text-green-500"});default:return(0,a.jsx)(F.A,{className:"w-4 h-4 text-gray-500"})}})(e.payment_method),(0,a.jsx)("span",{className:"capitalize",children:e.payment_method})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-muted-foreground mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(D.A,{className:"w-4 h-4"}),e.customer_email]}),e.customer_telegram&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(U.A,{className:"w-4 h-4"}),e.customer_telegram]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)($.A,{className:"w-4 h-4"}),new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsxs)("p",{className:"font-medium mb-1",children:["Service: ",e.service_type]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.project_description})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(F.A,{className:"w-4 h-4"}),e.budget_range]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(b.A,{className:"w-4 h-4"}),e.timeline]})]}),e.project_requirements&&e.project_requirements.length>0&&(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium mb-2",children:"Requirements:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:e.project_requirements.map((e,s)=>(0,a.jsx)(g.E,{variant:"secondary",className:"text-xs",children:e},s))})]})]}),(0,a.jsx)("div",{className:"flex flex-col gap-2 ml-4",children:(e=>{let s=[];switch(e.status){case"pending":s.push((0,a.jsxs)(d.$,{size:"sm",onClick:()=>X(e,"accept"),className:"bg-green-600 hover:bg-green-700",children:[(0,a.jsx)(w.A,{className:"w-3 h-3 mr-1"}),"Accept"]},"accept"));break;case"accepted":s.push((0,a.jsxs)(d.$,{size:"sm",onClick:()=>X(e,"start"),className:"bg-blue-600 hover:bg-blue-700",children:[(0,a.jsx)(b.A,{className:"w-3 h-3 mr-1"}),"Start"]},"start"));break;case"in_progress":s.push((0,a.jsxs)(d.$,{size:"sm",onClick:()=>X(e,"review"),className:"bg-purple-600 hover:bg-purple-700",children:[(0,a.jsx)(_.A,{className:"w-3 h-3 mr-1"}),"Review"]},"review"));break;case"review":s.push((0,a.jsxs)(d.$,{size:"sm",onClick:()=>X(e,"complete"),className:"bg-green-600 hover:bg-green-700",children:[(0,a.jsx)(w.A,{className:"w-3 h-3 mr-1"}),"Complete"]},"complete"))}return"pending"===e.payment_status&&s.push((0,a.jsxs)(d.$,{size:"sm",onClick:()=>X(e,"mark_paid"),className:"bg-green-600 hover:bg-green-700",children:[(0,a.jsx)(w.A,{className:"w-3 h-3 mr-1"}),"Mark Paid"]},"mark_paid")),s.push((0,a.jsxs)(d.$,{size:"sm",variant:"outline",onClick:()=>X(e,"view"),children:[(0,a.jsx)(_.A,{className:"w-3 h-3 mr-1"}),"View"]},"view"),(0,a.jsxs)(d.$,{size:"sm",variant:"outline",onClick:()=>X(e,"edit"),children:[(0,a.jsx)(u.A,{className:"w-3 h-3 mr-1"}),"Edit"]},"edit")),"completed"!==e.status||e.project_files||s.push((0,a.jsxs)(d.$,{size:"sm",onClick:()=>X(e,"deliver"),className:"bg-purple-600 hover:bg-purple-700",children:[(0,a.jsx)(E.A,{className:"w-3 h-3 mr-1"}),"Deliver"]},"deliver")),s})(e)})]})},e.id))})})]}),q&&T&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,a.jsx)("div",{className:"bg-black/50 backdrop-blur-sm rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto border border-white/20",children:(0,a.jsxs)("div",{className:"p-6 text-white",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Order Details"}),(0,a.jsx)(d.$,{variant:"outline",onClick:()=>L(!1),className:"border-white/20 text-white hover:bg-white/10",children:(0,a.jsx)(S.A,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-3 text-white",children:"Customer Information"}),(0,a.jsxs)("div",{className:"space-y-2 text-white",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Name:"})," ",T.customer_name]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Email:"})," ",T.customer_email]}),T.customer_telegram&&(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Telegram:"})," ",T.customer_telegram]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-3 text-white",children:"Project Information"}),(0,a.jsxs)("div",{className:"space-y-2 text-white",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Service:"})," ",T.service_type]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Budget:"})," ",T.budget_range]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Timeline:"})," ",T.timeline]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Status:"})," ",T.status]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Payment Status:"})," ",T.payment_status]})]})]})]}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("h3",{className:"font-semibold mb-3 text-white",children:"Project Description"}),(0,a.jsx)("p",{className:"text-white/80",children:T.project_description})]}),T.project_requirements&&T.project_requirements.length>0&&(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("h3",{className:"font-semibold mb-3 text-white",children:"Project Requirements"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:T.project_requirements.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(J.A,{className:"w-4 h-4 text-green-400"}),(0,a.jsx)("span",{className:"text-sm text-white",children:e})]},s))})]}),T.admin_notes&&(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("h3",{className:"font-semibold mb-3 text-white",children:"Admin Notes"}),(0,a.jsx)("p",{className:"text-white/80",children:T.admin_notes})]}),T.project_files&&(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("h3",{className:"font-semibold mb-3 text-white",children:"Project Files"}),(0,a.jsxs)("div",{className:"space-y-2 text-white",children:[T.project_files.source_code&&(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Source Code:"})," ",(0,a.jsx)("a",{href:T.project_files.source_code,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:T.project_files.source_code})]}),T.project_files.documentation&&(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Documentation:"})," ",(0,a.jsx)("a",{href:T.project_files.documentation,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:T.project_files.documentation})]}),T.project_files.demo_url&&(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Demo:"})," ",(0,a.jsx)("a",{href:T.project_files.demo_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:T.project_files.demo_url})]}),T.project_files.installation_guide&&(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Installation Guide:"})," ",(0,a.jsx)("a",{href:T.project_files.installation_guide,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:T.project_files.installation_guide})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 mt-8",children:[(0,a.jsx)(d.$,{variant:"outline",onClick:()=>L(!1),className:"border-white/20 text-white hover:bg-white/10",children:"Close"}),(0,a.jsx)(d.$,{onClick:()=>{Z(T),L(!1)},className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Edit Order"})]})]})})}),z&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,a.jsx)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Edit Order"}),(0,a.jsx)(d.$,{variant:"outline",onClick:()=>Z(null),children:(0,a.jsx)(S.A,{className:"w-4 h-4"})})]}),(0,a.jsx)("form",{onSubmit:e=>{e.preventDefault();let s=new FormData(e.currentTarget),t={admin_notes:s.get("admin_notes"),delivery_date:s.get("delivery_date")};G(z.id,t)},children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Admin Notes"}),(0,a.jsx)(N.T,{name:"admin_notes",defaultValue:z.admin_notes||"",placeholder:"Add admin notes...",rows:3})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Expected Delivery Date"}),(0,a.jsx)(f.p,{type:"date",name:"delivery_date",defaultValue:z.delivery_date?z.delivery_date.split("T")[0]:""})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)(d.$,{type:"button",variant:"outline",onClick:()=>Z(null),children:"Cancel"}),(0,a.jsx)(d.$,{type:"submit",children:"Update Order"})]})]})})]})})})]})};var T=t(53),I=t(8295),q=t(5870);let L=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(I.bL,{className:(0,q.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...r,ref:s,children:(0,a.jsx)(I.zi,{className:(0,q.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});L.displayName=I.bL.displayName;var z=t(672),Z=t(822),B=t(6108),M=t(345),V=t(5104),W=t(3022),H=t(2089);function G(){let[e,s]=(0,r.useState)([]),[t,i]=(0,r.useState)(!0),[c,o]=(0,r.useState)(null),[m,u]=(0,r.useState)(!1),[h,x]=(0,r.useState)(new Set),{toast:j}=(0,n.dj)();(0,r.useEffect)(()=>{p()},[]);let p=async()=>{try{let{data:e,error:t}=await l.N.from("content_sections").select("*").order("sort_order",{ascending:!0});if(t)throw t;s(e||[])}catch(e){j({title:"Error",description:"Failed to fetch content sections",variant:"destructive"})}finally{i(!1)}},b=async e=>{try{let s={...e};if("string"==typeof s.metadata&&s.metadata.trim().length>0)try{s.metadata=JSON.parse(s.metadata)}catch(e){j({title:"Invalid Metadata",description:"Metadata must be valid JSON.",variant:"destructive"});return}if(e.id){let{error:t}=await l.N.from("content_sections").update(s).eq("id",e.id);if(t)throw t;j({title:"Success",description:"Section updated successfully"})}else{let{error:e}=await l.N.from("content_sections").insert([s]);if(e)throw e;j({title:"Success",description:"Section created successfully"})}await p(),o(null),u(!1)}catch(e){j({title:"Error",description:"Failed to save section",variant:"destructive"})}},w=async e=>{if(confirm("Are you sure you want to delete this section?"))try{let{error:s}=await l.N.from("content_sections").delete().eq("id",e);if(s)throw s;await p(),j({title:"Success",description:"Section deleted successfully"})}catch(e){j({title:"Error",description:"Failed to delete section",variant:"destructive"})}},_=e=>{let{section:s,onSave:t,onCancel:l}=e,[i,n]=(0,r.useState)(s),[c,o]=(0,r.useState)(!1);return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-background rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:s.id?"Edit Section":"Create New Section"}),(0,a.jsx)(d.$,{variant:"ghost",size:"sm",onClick:l,children:(0,a.jsx)(z.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(i)},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(T.J,{htmlFor:"section_type",children:"Section Type"}),(0,a.jsxs)(y.l6,{value:i.section_type,onValueChange:e=>n({...i,section_type:e}),children:[(0,a.jsx)(y.bq,{children:(0,a.jsx)(y.yv,{placeholder:"Select section type"})}),(0,a.jsxs)(y.gC,{children:[(0,a.jsx)(y.eb,{value:"hero",children:"Hero Section"}),(0,a.jsx)(y.eb,{value:"about",children:"About Section"}),(0,a.jsx)(y.eb,{value:"services",children:"Services Section"}),(0,a.jsx)(y.eb,{value:"settings",children:"Site Settings"}),(0,a.jsx)(y.eb,{value:"custom",children:"Custom Section"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(T.J,{htmlFor:"sort_order",children:"Sort Order"}),(0,a.jsx)(f.p,{id:"sort_order",type:"number",value:i.sort_order,onChange:e=>n({...i,sort_order:parseInt(e.target.value)||0})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(T.J,{htmlFor:"title",children:"Title"}),(0,a.jsx)(f.p,{id:"title",value:i.title,onChange:e=>n({...i,title:e.target.value}),placeholder:"Section title"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(T.J,{htmlFor:"subtitle",children:"Subtitle"}),(0,a.jsx)(f.p,{id:"subtitle",value:i.subtitle,onChange:e=>n({...i,subtitle:e.target.value}),placeholder:"Section subtitle"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(T.J,{htmlFor:"content",children:"Content"}),(0,a.jsx)(N.T,{id:"content",value:i.content,onChange:e=>n({...i,content:e.target.value}),placeholder:"Section content",rows:3})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(T.J,{htmlFor:"image_url",children:"Image URL"}),(0,a.jsx)(f.p,{id:"image_url",value:i.image_url,onChange:e=>n({...i,image_url:e.target.value}),placeholder:"https://example.com/image.jpg"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(L,{id:"is_active",checked:i.is_active,onCheckedChange:e=>n({...i,is_active:e})}),(0,a.jsx)(T.J,{htmlFor:"is_active",children:"Active"})]}),i.section_type&&(0,a.jsxs)("div",{className:"border-t pt-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)(T.J,{className:"text-lg font-medium",children:"Metadata Configuration"}),(0,a.jsxs)(d.$,{type:"button",variant:"outline",size:"sm",onClick:()=>o(!c),children:[c?(0,a.jsx)(Z.A,{className:"h-4 w-4"}):(0,a.jsx)(B.A,{className:"h-4 w-4"}),c?"Hide":"Show"," Advanced"]})]}),c?(0,a.jsx)("div",{className:"space-y-4",children:(()=>{var e,s,t,r,l,d,c,o,m,u,h,x,j,p,v,g,b,w,_,S;switch(i.section_type){case"hero":return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(T.J,{htmlFor:"headline",children:"Headline"}),(0,a.jsx)(f.p,{id:"headline",value:(null==(e=i.metadata)?void 0:e.headline)||"",onChange:e=>n({...i,metadata:{...i.metadata,headline:e.target.value}}),placeholder:"I Build Bots That"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(T.J,{htmlFor:"subheadline",children:"Subheadline"}),(0,a.jsx)(f.p,{id:"subheadline",value:(null==(s=i.metadata)?void 0:s.subheadline)||"",onChange:e=>n({...i,metadata:{...i.metadata,subheadline:e.target.value}}),placeholder:"Telegram, Discord, Web Automation & More |"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(T.J,{htmlFor:"years",children:"Years Experience"}),(0,a.jsx)(f.p,{id:"years",value:(null==(r=i.metadata)||null==(t=r.stats)?void 0:t.years)||"",onChange:e=>{var s;return n({...i,metadata:{...i.metadata,stats:{...null==(s=i.metadata)?void 0:s.stats,years:e.target.value}}})},placeholder:"2+"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(T.J,{htmlFor:"projects",children:"Projects"}),(0,a.jsx)(f.p,{id:"projects",value:(null==(d=i.metadata)||null==(l=d.stats)?void 0:l.projects)||"",onChange:e=>{var s;return n({...i,metadata:{...i.metadata,stats:{...null==(s=i.metadata)?void 0:s.stats,projects:e.target.value}}})},placeholder:"30+"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(T.J,{htmlFor:"rating",children:"Rating"}),(0,a.jsx)(f.p,{id:"rating",value:(null==(o=i.metadata)||null==(c=o.stats)?void 0:c.rating)||"",onChange:e=>{var s;return n({...i,metadata:{...i.metadata,stats:{...null==(s=i.metadata)?void 0:s.stats,rating:e.target.value}}})},placeholder:"5⭐"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(T.J,{htmlFor:"fiverrUrl",children:"Fiverr URL"}),(0,a.jsx)(f.p,{id:"fiverrUrl",value:(null==(u=i.metadata)||null==(m=u.ctas)?void 0:m.fiverrUrl)||"",onChange:e=>{var s;return n({...i,metadata:{...i.metadata,ctas:{...null==(s=i.metadata)?void 0:s.ctas,fiverrUrl:e.target.value}}})},placeholder:"https://fiverr.com/..."})]})]});case"about":return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(T.J,{htmlFor:"aboutCopy",children:"About Copy"}),(0,a.jsx)(N.T,{id:"aboutCopy",value:(null==(h=i.metadata)?void 0:h.aboutCopy)||"",onChange:e=>n({...i,metadata:{...i.metadata,aboutCopy:e.target.value}}),placeholder:"I'm a bot automation expert...",rows:3})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(T.J,{children:"Skills"}),(0,a.jsx)("div",{className:"space-y-2",children:[0,1,2,3,4,5,6,7].map(e=>{var s,t,r,l,d,c,o,m,u;return(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-2",children:[(0,a.jsx)(f.p,{placeholder:"Skill name",value:(null==(r=i.metadata)||null==(t=r.skills)||null==(s=t[e])?void 0:s.name)||"",onChange:s=>{var t;let a=[...(null==(t=i.metadata)?void 0:t.skills)||[]];a[e]||(a[e]={}),a[e]={...a[e],name:s.target.value},n({...i,metadata:{...i.metadata,skills:a}})}}),(0,a.jsx)(f.p,{type:"number",placeholder:"Level %",value:(null==(c=i.metadata)||null==(d=c.skills)||null==(l=d[e])?void 0:l.level)||"",onChange:s=>{var t;let a=[...(null==(t=i.metadata)?void 0:t.skills)||[]];a[e]||(a[e]={}),a[e]={...a[e],level:parseInt(s.target.value)||0},n({...i,metadata:{...i.metadata,skills:a}})}}),(0,a.jsxs)(y.l6,{value:(null==(u=i.metadata)||null==(m=u.skills)||null==(o=m[e])?void 0:o.color)||"text-primary",onValueChange:s=>{var t;let a=[...(null==(t=i.metadata)?void 0:t.skills)||[]];a[e]||(a[e]={}),a[e]={...a[e],color:s},n({...i,metadata:{...i.metadata,skills:a}})},children:[(0,a.jsx)(y.bq,{children:(0,a.jsx)(y.yv,{})}),(0,a.jsxs)(y.gC,{children:[(0,a.jsx)(y.eb,{value:"text-primary",children:"Primary"}),(0,a.jsx)(y.eb,{value:"text-secondary",children:"Secondary"})]})]})]},e)})})]})]});case"services":return(0,a.jsx)("div",{className:"space-y-4",children:[0,1,2,3].map(e=>{var s,t,r,l,d,c,o,m,u,h;return(0,a.jsxs)("div",{className:"border rounded-lg p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(T.J,{children:"Service Title"}),(0,a.jsx)(f.p,{placeholder:"Service name",value:(null==(r=i.metadata)||null==(t=r.services)||null==(s=t[e])?void 0:s.title)||"",onChange:s=>{var t;let a=[...(null==(t=i.metadata)?void 0:t.services)||[]];a[e]||(a[e]={}),a[e]={...a[e],title:s.target.value},n({...i,metadata:{...i.metadata,services:a}})}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(T.J,{children:"Description"}),(0,a.jsx)(f.p,{placeholder:"Service description",value:(null==(c=i.metadata)||null==(d=c.services)||null==(l=d[e])?void 0:l.description)||"",onChange:s=>{var t;let a=[...(null==(t=i.metadata)?void 0:t.services)||[]];a[e]||(a[e]={}),a[e]={...a[e],description:s.target.value},n({...i,metadata:{...i.metadata,services:a}})}})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(T.J,{children:"Features (comma separated)"}),(0,a.jsx)(f.p,{placeholder:"Feature 1, Feature 2, Feature 3",value:(null==(h=i.metadata)||null==(u=h.services)||null==(m=u[e])||null==(o=m.features)?void 0:o.join(", "))||"",onChange:s=>{var t;let a=s.target.value.split(",").map(e=>e.trim()).filter(e=>e),r=[...(null==(t=i.metadata)?void 0:t.services)||[]];r[e]||(r[e]={}),r[e]={...r[e],features:a},n({...i,metadata:{...i.metadata,services:r}})}})]})]},e)})});case"settings":return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(T.J,{htmlFor:"brandName",children:"Brand Name"}),(0,a.jsx)(f.p,{id:"brandName",value:(null==(x=i.metadata)?void 0:x.brandName)||"",onChange:e=>n({...i,metadata:{...i.metadata,brandName:e.target.value}}),placeholder:"Mushfiq's Bots"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(T.J,{htmlFor:"fiverrUrl",children:"Fiverr URL"}),(0,a.jsx)(f.p,{id:"fiverrUrl",value:(null==(p=i.metadata)||null==(j=p.links)?void 0:j.fiverrUrl)||"",onChange:e=>{var s;return n({...i,metadata:{...i.metadata,links:{...null==(s=i.metadata)?void 0:s.links,fiverrUrl:e.target.value}}})},placeholder:"https://fiverr.com/..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(T.J,{htmlFor:"telegramUrl",children:"Telegram URL"}),(0,a.jsx)(f.p,{id:"telegramUrl",value:(null==(g=i.metadata)||null==(v=g.links)?void 0:v.telegramUrl)||"",onChange:e=>{var s;return n({...i,metadata:{...i.metadata,links:{...null==(s=i.metadata)?void 0:s.links,telegramUrl:e.target.value}}})},placeholder:"https://t.me/..."})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(T.J,{htmlFor:"email",children:"Email"}),(0,a.jsx)(f.p,{id:"email",value:(null==(w=i.metadata)||null==(b=w.links)?void 0:b.email)||"",onChange:e=>{var s;return n({...i,metadata:{...i.metadata,links:{...null==(s=i.metadata)?void 0:s.links,email:e.target.value}}})},placeholder:"email@example.com"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(T.J,{htmlFor:"linkedin",children:"LinkedIn"}),(0,a.jsx)(f.p,{id:"linkedin",value:(null==(S=i.metadata)||null==(_=S.links)?void 0:_.linkedin)||"",onChange:e=>{var s;return n({...i,metadata:{...i.metadata,links:{...null==(s=i.metadata)?void 0:s.links,linkedin:e.target.value}}})},placeholder:"https://linkedin.com/..."})]})]})]});default:return(0,a.jsxs)("div",{children:[(0,a.jsx)(T.J,{htmlFor:"metadata",children:"Metadata (JSON)"}),(0,a.jsx)(N.T,{id:"metadata",value:"string"==typeof i.metadata||null==i.metadata?i.metadata||"":JSON.stringify(i.metadata,null,2),onChange:e=>n({...i,metadata:e.target.value}),placeholder:"Enter JSON metadata",rows:8}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Use this for custom section types"})]})}})()}):(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:'Click "Show Advanced" to configure section-specific metadata'})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(d.$,{type:"button",variant:"outline",onClick:l,children:"Cancel"}),(0,a.jsxs)(d.$,{type:"submit",children:[(0,a.jsx)(M.A,{className:"mr-2 h-4 w-4"}),"Save Section"]})]})]})]})})};return t?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),(0,a.jsx)("p",{className:"mt-2 text-muted-foreground",children:"Loading content sections..."})]})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Content Management"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage your website content and sections"})]}),(0,a.jsxs)(d.$,{onClick:()=>u(!0),children:[(0,a.jsx)(V.A,{className:"mr-2 h-4 w-4"}),"Add Section"]})]}),(0,a.jsx)("div",{className:"grid gap-4",children:e.map(e=>(0,a.jsxs)(v.Zp,{className:"overflow-hidden",children:[(0,a.jsx)(v.aR,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(g.E,{variant:e.is_active?"default":"secondary",children:e.section_type}),(0,a.jsx)("span",{className:"font-semibold",children:e.title})]}),(0,a.jsxs)(g.E,{variant:"outline",className:"text-xs",children:["Order: ",e.sort_order]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.$,{variant:"ghost",size:"sm",onClick:()=>(e=>{let s=new Set(h);s.has(e)?s.delete(e):s.add(e),x(s)})(e.id),children:h.has(e.id)?(0,a.jsx)(Z.A,{className:"h-4 w-4"}):(0,a.jsx)(B.A,{className:"h-4 w-4"})}),(0,a.jsx)(d.$,{variant:"ghost",size:"sm",onClick:()=>o(e),children:(0,a.jsx)(W.A,{className:"h-4 w-4"})}),(0,a.jsx)(d.$,{variant:"ghost",size:"sm",onClick:()=>w(e.id),children:(0,a.jsx)(H.A,{className:"h-4 w-4"})})]})]})}),h.has(e.id)&&(0,a.jsx)(v.Wu,{className:"pt-0",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(T.J,{className:"text-sm font-medium",children:"Subtitle"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.subtitle||"Not set"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(T.J,{className:"text-sm font-medium",children:"Content"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.content||"Not set"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(T.J,{className:"text-sm font-medium",children:"Status"}),(0,a.jsx)(g.E,{variant:e.is_active?"default":"secondary",children:e.is_active?"Active":"Inactive"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(T.J,{className:"text-sm font-medium",children:"Metadata Preview"}),(0,a.jsx)("div",{className:"mt-2 p-3 bg-muted/50 rounded-md",children:((e,s)=>{if(!e)return(0,a.jsx)("span",{className:"text-muted-foreground text-sm",children:"No metadata"});switch(s){case"hero":return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Headline:"})," ",e.headline||"Not set"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Subheadline:"})," ",e.subheadline||"Not set"]})]}),e.stats&&(0,a.jsx)("div",{className:"flex gap-2",children:Object.entries(e.stats).map(e=>{let[s,t]=e;return(0,a.jsxs)(g.E,{variant:"secondary",className:"text-xs",children:[s,": ",String(t)]},s)})})]});case"about":return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("strong",{children:"About Copy:"})," ",e.aboutCopy||"Not set"]}),e.skills&&(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.skills.map((e,s)=>(0,a.jsxs)(g.E,{variant:"outline",className:"text-xs",children:[e.name," (",e.level,"%)"]},s))})]});case"services":return(0,a.jsx)("div",{className:"space-y-2",children:e.services&&e.services.map((e,s)=>(0,a.jsxs)("div",{className:"text-sm border-l-2 border-primary pl-2",children:[(0,a.jsx)("strong",{children:e.title}),(0,a.jsx)("div",{className:"text-muted-foreground",children:e.description})]},s))});case"settings":return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("strong",{children:"Brand:"})," ",e.brandName||"Not set"]}),e.links&&(0,a.jsx)("div",{className:"grid grid-cols-2 gap-1 text-xs",children:Object.entries(e.links).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("strong",{children:[s,":"]})," ",String(t).substring(0,30),"..."]},s)})})]});default:return(0,a.jsxs)("div",{className:"text-xs text-muted-foreground max-w-xs truncate",children:[JSON.stringify(e).substring(0,100),"..."]})}})(e.metadata,e.section_type)})]})]})})]},e.id))}),m&&(0,a.jsx)(_,{section:{section_type:"",title:"",subtitle:"",content:"",image_url:"",is_active:!0,sort_order:0},onSave:b,onCancel:()=>u(!1)}),c&&(0,a.jsx)(_,{section:c,onSave:b,onCancel:()=>o(null)})]})}var X=t(6739),Y=t(9142),K=t(1377);function Q(){var e,s;let[t,i]=(0,r.useState)([]),[c,o]=(0,r.useState)(!0),[m,u]=(0,r.useState)(null),[h,j]=(0,r.useState)(!1),[p,b]=(0,r.useState)("all"),[w,_]=(0,r.useState)({}),[S,k]=(0,r.useState)(!1),{toast:C}=(0,n.dj)(),A=[{id:"all",label:"All Categories"},{id:"telegram",label:"Telegram Bots"},{id:"miniapp",label:"Mini Apps"},{id:"react",label:"React.js"},{id:"discord",label:"Discord Bots"},{id:"trading",label:"Trading Bots"},{id:"scraping",label:"Web Scraping"},{id:"ai",label:"AI Bots"},{id:"automation",label:"Automation"}],F=t.filter(e=>e.is_featured),D=t.filter(e=>!e.is_featured),U="all"===p?F:F.filter(e=>e.category===p),$="all"===p?D:D.filter(e=>e.category===p);(0,r.useEffect)(()=>{J()},[]);let J=async()=>{try{o(!0);let{data:e,error:s}=await l.N.from("projects").select("*").order("sort_order",{ascending:!0});if(s)throw s;i(e||[])}catch(e){C({title:"Error",description:"Failed to fetch projects",variant:"destructive"})}finally{o(!1)}},R=e=>{try{return new URL(e),!0}catch(e){return!1}},O=async e=>{try{return k(!0),new FormData().append("image",e),await new Promise(e=>setTimeout(e,1e3)),"https://via.placeholder.com/400x300/2563eb/ffffff?text=".concat(encodeURIComponent(e.name))}catch(e){throw Error("Failed to upload image")}finally{k(!1)}},I=async e=>{try{let s=(e=>{var s,t;let a={};return(null==(s=e.title)?void 0:s.trim())?e.title.length<3&&(a.title="Title must be at least 3 characters"):a.title="Title is required",(null==(t=e.description)?void 0:t.trim())?e.description.length<10&&(a.description="Description must be at least 10 characters"):a.description="Description is required",e.category||(a.category="Category is required"),e.demo_url&&!R(e.demo_url)&&(a.demo_url="Please enter a valid demo URL"),e.github_url&&!R(e.github_url)&&(a.github_url="Please enter a valid GitHub URL"),e.image_url&&!R(e.image_url)&&(a.image_url="Please enter a valid image URL"),a})(e);if(Object.keys(s).length>0){_(s),C({title:"Validation Error",description:"Please fix the errors in the form",variant:"destructive"});return}if(_({}),e.id){let{error:s}=await l.N.from("projects").update({...e,updated_at:new Date().toISOString()}).eq("id",e.id);if(s)throw s;C({title:"Success",description:"Project updated successfully"}),u(null)}else{let{error:s}=await l.N.from("projects").insert({...e,updated_at:new Date().toISOString()});if(s)throw s;C({title:"Success",description:"Project created successfully"}),j(!1)}await J()}catch(e){C({title:"Error",description:"Failed to save project",variant:"destructive"})}},q=async(e,s)=>{try{let{error:t}=await l.N.from("projects").update({is_featured:s,updated_at:new Date().toISOString()}).eq("id",e);if(t)throw t;C({title:"Success",description:"Project ".concat(s?"marked as":"removed from"," featured")}),await J()}catch(e){C({title:"Error",description:"Failed to update project",variant:"destructive"})}},Z=async(e,s)=>{try{let{error:t}=await l.N.from("projects").update({is_featured:s,updated_at:new Date().toISOString()}).in("id",e);if(t)throw t;C({title:"Success",description:"".concat(e.length," projects ").concat(s?"marked as":"removed from"," featured")}),await J()}catch(e){C({title:"Error",description:"Failed to update projects",variant:"destructive"})}},B=async e=>{if(confirm("Are you sure you want to delete this project? This action cannot be undone."))try{let{error:s}=await l.N.from("projects").delete().eq("id",e);if(s)throw s;C({title:"Success",description:"Project deleted successfully"}),await J()}catch(e){C({title:"Error",description:"Failed to delete project",variant:"destructive"})}},G=async(e,s)=>{try{let{error:t}=await l.N.from("projects").update({sort_order:s,updated_at:new Date().toISOString()}).eq("id",e);if(t)throw t;await J()}catch(e){C({title:"Error",description:"Failed to update sort order",variant:"destructive"})}},Q=e=>{var s;let{project:t,onSave:l,onCancel:i}=e,[n,c]=(0,r.useState)(t),[o,m]=(0,r.useState)(""),[u,h]=(0,r.useState)(null),x=()=>{o.trim()&&(c({...n,technologies:[...n.technologies||[],o.trim()]}),m(""))},j=async e=>{var s;let t=null==(s=e.target.files)?void 0:s[0];if(t){h(t);try{let e=await O(t);c({...n,image_url:e})}catch(e){C({title:"Upload Error",description:"Failed to upload image",variant:"destructive"})}}};return(0,a.jsxs)(v.Zp,{children:[(0,a.jsx)(v.aR,{children:(0,a.jsx)(v.ZB,{children:t.id?"Edit Project":"Create New Project"})}),(0,a.jsx)(v.Wu,{children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),l(n)},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(T.J,{htmlFor:"title",children:"Title *"}),(0,a.jsx)(f.p,{id:"title",value:n.title,onChange:e=>c({...n,title:e.target.value}),placeholder:"Project title",required:!0,className:w.title?"border-red-500":""}),w.title&&(0,a.jsxs)(K.Fc,{variant:"destructive",className:"py-2",children:[(0,a.jsx)(X.A,{className:"h-4 w-4"}),(0,a.jsx)(K.TN,{children:w.title})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(T.J,{htmlFor:"category",children:"Category *"}),(0,a.jsxs)(y.l6,{value:n.category,onValueChange:e=>c({...n,category:e}),children:[(0,a.jsx)(y.bq,{className:w.category?"border-red-500":"",children:(0,a.jsx)(y.yv,{placeholder:"Select a category"})}),(0,a.jsx)(y.gC,{children:A.slice(1).map(e=>(0,a.jsx)(y.eb,{value:e.id,children:e.label},e.id))})]}),w.category&&(0,a.jsxs)(K.Fc,{variant:"destructive",className:"py-2",children:[(0,a.jsx)(X.A,{className:"h-4 w-4"}),(0,a.jsx)(K.TN,{children:w.category})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(T.J,{htmlFor:"description",children:"Description *"}),(0,a.jsx)(N.T,{id:"description",value:n.description,onChange:e=>c({...n,description:e.target.value}),placeholder:"Project description",rows:3,className:w.description?"border-red-500":""}),w.description&&(0,a.jsxs)(K.Fc,{variant:"destructive",className:"py-2",children:[(0,a.jsx)(X.A,{className:"h-4 w-4"}),(0,a.jsx)(K.TN,{children:w.description})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(T.J,{children:"Project Image"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(f.p,{type:"file",accept:"image/*",onChange:j,disabled:S,className:"cursor-pointer",id:"image-upload"})}),(0,a.jsxs)(d.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{var e;return null==(e=document.getElementById("image-upload"))?void 0:e.click()},disabled:S,children:[S?(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"}):(0,a.jsx)(E.A,{className:"h-4 w-4"}),S?"Uploading...":"Upload"]})]}),n.image_url&&(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsxs)("div",{className:"relative inline-block",children:[(0,a.jsx)("img",{src:n.image_url,alt:"Preview",className:"w-32 h-24 object-cover rounded-lg border"}),(0,a.jsx)(d.$,{type:"button",variant:"destructive",size:"sm",className:"absolute -top-2 -right-2 h-6 w-6 p-0",onClick:()=>c({...n,image_url:""}),children:(0,a.jsx)(z.A,{className:"h-3 w-3"})})]})}),w.image_url&&(0,a.jsxs)(K.Fc,{variant:"destructive",className:"py-2",children:[(0,a.jsx)(X.A,{className:"h-4 w-4"}),(0,a.jsx)(K.TN,{children:w.image_url})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(T.J,{htmlFor:"github_url",children:"GitHub URL"}),(0,a.jsx)(f.p,{id:"github_url",value:n.github_url,onChange:e=>c({...n,github_url:e.target.value}),placeholder:"GitHub repository URL",className:w.github_url?"border-red-500":""}),w.github_url&&(0,a.jsxs)(K.Fc,{variant:"destructive",className:"py-2",children:[(0,a.jsx)(X.A,{className:"h-4 w-4"}),(0,a.jsx)(K.TN,{children:w.github_url})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(T.J,{htmlFor:"demo_url",children:"Demo URL"}),(0,a.jsx)(f.p,{id:"demo_url",value:n.demo_url,onChange:e=>c({...n,demo_url:e.target.value}),placeholder:"Live demo URL",className:w.demo_url?"border-red-500":""}),w.demo_url&&(0,a.jsxs)(K.Fc,{variant:"destructive",className:"py-2",children:[(0,a.jsx)(X.A,{className:"h-4 w-4"}),(0,a.jsx)(K.TN,{children:w.demo_url})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(T.J,{children:"Technologies"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(f.p,{value:o,onChange:e=>m(e.target.value),placeholder:"Add technology",onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),x())}),(0,a.jsx)(d.$,{type:"button",onClick:x,disabled:!o.trim(),children:"Add"})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:null==(s=n.technologies)?void 0:s.map((e,s)=>(0,a.jsxs)(g.E,{variant:"secondary",className:"flex items-center gap-1",children:[e,(0,a.jsx)(d.$,{type:"button",variant:"ghost",size:"sm",className:"h-4 w-4 p-0 hover:bg-transparent",onClick:()=>{var e;c({...n,technologies:(null==(e=n.technologies)?void 0:e.filter((e,t)=>t!==s))||[]})},children:(0,a.jsx)(z.A,{className:"h-3 w-3"})})]},s))})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(L,{id:"featured",checked:n.is_featured,onCheckedChange:e=>c({...n,is_featured:e})}),(0,a.jsx)(T.J,{htmlFor:"featured",children:"Mark as Featured Project"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(T.J,{htmlFor:"sort_order",children:"Sort Order"}),(0,a.jsx)(f.p,{id:"sort_order",type:"number",value:n.sort_order,onChange:e=>c({...n,sort_order:parseInt(e.target.value)||0}),placeholder:"0",min:"0"})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,a.jsxs)(d.$,{type:"submit",className:"flex-1",children:[(0,a.jsx)(M.A,{className:"mr-2 h-4 w-4"}),t.id?"Update Project":"Create Project"]}),(0,a.jsxs)(d.$,{type:"button",variant:"outline",onClick:i,children:[(0,a.jsx)(z.A,{className:"mr-2 h-4 w-4"}),"Cancel"]})]})]})})]})};return c?(0,a.jsx)("div",{className:"text-center py-8",children:"Loading projects..."}):(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-muted/30 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(P.A,{className:"h-5 w-5 text-muted-foreground"}),(0,a.jsx)(T.J,{htmlFor:"category-filter",children:"Filter by Category:"})]}),(0,a.jsxs)(y.l6,{value:p,onValueChange:b,children:[(0,a.jsx)(y.bq,{className:"w-64",children:(0,a.jsx)(y.yv,{placeholder:"Select category"})}),(0,a.jsx)(y.gC,{children:A.map(e=>(0,a.jsx)(y.eb,{value:e.id,children:e.label},e.id))})]}),(0,a.jsx)(g.E,{variant:"secondary",children:"all"===p?"".concat(t.length," total projects"):"".concat(U.length+$.length," projects in ").concat(null==(e=A.find(e=>e.id===p))?void 0:e.label)})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[(0,a.jsx)(x.A,{className:"h-6 w-6 text-yellow-500 fill-current"}),"Featured Projects",(0,a.jsx)(g.E,{className:"bg-yellow-100 text-yellow-800 border-yellow-300",children:F.length})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Featured projects appear prominently on the main website"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(d.$,{onClick:()=>j(!0),variant:"outline",children:[(0,a.jsx)(V.A,{className:"mr-2 h-4 w-4"}),"Add Featured Project"]}),F.length>0&&(0,a.jsx)(d.$,{onClick:()=>Z(F.map(e=>e.id),!1),variant:"outline",className:"text-red-600 border-red-300 hover:bg-red-50",children:"Remove All Featured"})]})]}),0===U.length?(0,a.jsx)(v.Zp,{children:(0,a.jsxs)(v.Wu,{className:"text-center py-12",children:[(0,a.jsx)(x.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No Featured Projects"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:"all"===p?"Featured projects will appear here and be displayed prominently on the main website.":"No featured projects found in the selected category. Try selecting a different category or create a new featured project."}),(0,a.jsxs)(d.$,{onClick:()=>j(!0),children:[(0,a.jsx)(V.A,{className:"mr-2 h-4 w-4"}),"Create Featured Project"]})]})}):(0,a.jsx)("div",{className:"grid gap-4",children:U.map((e,s)=>{var t;return(0,a.jsxs)(v.Zp,{className:"border-2 border-yellow-200 bg-yellow-50/30 hover:shadow-lg transition-shadow",children:[(0,a.jsx)(v.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg bg-yellow-100 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-yellow-800 font-bold text-lg",children:s+1})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(v.ZB,{className:"text-lg flex items-center gap-2",children:[(0,a.jsx)(x.A,{className:"h-5 w-5 text-yellow-500 fill-current"}),e.title]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsx)(g.E,{className:"bg-yellow-100 text-yellow-800 border-yellow-300",children:"Featured"}),e.category&&(0,a.jsx)(g.E,{variant:"outline",children:(null==(t=A.find(s=>s.id===e.category))?void 0:t.label)||e.category})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(d.$,{variant:"outline",size:"sm",onClick:()=>q(e.id,!1),className:"text-yellow-600 border-yellow-300 hover:bg-yellow-100",children:"Remove Featured"}),(0,a.jsx)(d.$,{variant:"outline",size:"sm",onClick:()=>u(e),children:(0,a.jsx)(W.A,{className:"h-4 w-4"})}),(0,a.jsx)(d.$,{variant:"outline",size:"sm",onClick:()=>B(e.id),className:"text-red-600 border-red-300 hover:bg-red-50",children:(0,a.jsx)(H.A,{className:"h-4 w-4"})})]})]})}),(0,a.jsx)(v.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description}),e.technologies&&e.technologies.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{className:"text-sm",children:"Technologies:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:e.technologies.map((e,s)=>(0,a.jsx)(g.E,{variant:"secondary",className:"text-xs",children:e},s))})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex gap-4",children:[e.github_url&&(0,a.jsxs)("a",{href:e.github_url,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline flex items-center gap-1 text-sm",children:["GitHub ",(0,a.jsx)(Y.A,{className:"h-3 w-3"})]}),e.demo_url&&(0,a.jsxs)("a",{href:e.demo_url,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline flex items-center gap-1 text-sm",children:["Demo ",(0,a.jsx)(Y.A,{className:"h-3 w-3"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(T.J,{htmlFor:"sort-".concat(e.id),className:"text-xs text-muted-foreground",children:"Sort Order:"}),(0,a.jsx)(f.p,{id:"sort-".concat(e.id),type:"number",value:e.sort_order||0,onChange:s=>G(e.id,parseInt(s.target.value)||0),className:"w-16 h-8 text-xs",min:"0"})]})]})]})})]},e.id)})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"All Projects"}),(0,a.jsxs)(d.$,{onClick:()=>j(!0),variant:"outline",children:[(0,a.jsx)(V.A,{className:"mr-2 h-4 w-4"}),"Add Project"]})]}),h&&(0,a.jsx)(Q,{project:{title:"",description:"",image_url:"",technologies:[],github_url:"",demo_url:"",category:"",is_featured:!1,sort_order:0},onSave:I,onCancel:()=>j(!1)}),m&&(0,a.jsx)(Q,{project:m,onSave:I,onCancel:()=>u(null)}),(0,a.jsx)("div",{className:"grid gap-4",children:$.map(e=>{var s,t;return(0,a.jsxs)(v.Zp,{children:[(0,a.jsx)(v.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(v.ZB,{className:"text-lg",children:e.title}),(0,a.jsx)("div",{className:"flex gap-2 mt-2",children:e.category&&(0,a.jsx)(g.E,{variant:"outline",children:(null==(s=A.find(s=>s.id===e.category))?void 0:s.label)||e.category})})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(d.$,{variant:"outline",size:"sm",onClick:()=>q(e.id,!1),className:"text-green-600 border-green-300 hover:bg-green-100",children:[(0,a.jsx)(x.A,{className:"h-4 w-4 mr-1"}),"Make Featured"]}),(0,a.jsx)(d.$,{variant:"outline",size:"sm",onClick:()=>u(e),children:(0,a.jsx)(W.A,{className:"h-4 w-4"})}),(0,a.jsx)(d.$,{variant:"outline",size:"sm",onClick:()=>B(e.id),children:(0,a.jsx)(H.A,{className:"h-4 w-4"})})]})]})}),(0,a.jsx)(v.Wu,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Description:"})," ",e.description]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Technologies:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:null==(t=e.technologies)?void 0:t.map((e,s)=>(0,a.jsx)(g.E,{variant:"secondary",children:e},s))})]}),(0,a.jsxs)("div",{className:"flex gap-4 mt-2",children:[e.github_url&&(0,a.jsxs)("a",{href:e.github_url,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline flex items-center gap-1",children:["GitHub ",(0,a.jsx)(Y.A,{className:"h-3 w-3"})]}),e.demo_url&&(0,a.jsxs)("a",{href:e.demo_url,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline flex items-center gap-1",children:["Demo ",(0,a.jsx)(Y.A,{className:"h-3 w-3"})]})]})]})})]},e.id)})}),0===$.length&&(0,a.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"all"===p?"No regular projects found.":"No regular projects found in ".concat(null==(s=A.find(e=>e.id===p))?void 0:s.label,".")})]})]})}var ee=t(5884),es=t(9628);function et(){let[e,s]=(0,r.useState)([]),[t,i]=(0,r.useState)([]),[c,o]=(0,r.useState)(!0),[m,u]=(0,r.useState)(null),[h,j]=(0,r.useState)({}),[p,y]=(0,r.useState)(null),{toast:b}=(0,n.dj)();(0,r.useEffect)(()=>{k(),C()},[]);let k=async()=>{try{let{data:e,error:t}=await l.N.from("reviews").select("*").order("created_at",{ascending:!1});if(t)throw t;s(e||[])}catch(e){b({title:"Error",description:"Failed to fetch reviews",variant:"destructive"})}finally{o(!1)}},C=async()=>{try{let{data:e,error:s}=await l.N.from("orders").select("id, customer_name, service_type, status, created_at").order("created_at",{ascending:!1});if(s)throw s;i(e||[])}catch(e){console.error("Error fetching orders:",e)}},A=async(t,a,r)=>{try{let{error:i}=await l.N.from("reviews").update({[a]:r}).eq("id",t);if(i)throw i;s(e.map(e=>e.id===t?{...e,[a]:r}:e)),b({title:"Success",description:"Review ".concat("is_approved"===a?"approval":"featured"," status updated")})}catch(e){b({title:"Error",description:"Failed to update review status",variant:"destructive"})}},F=()=>{u(null),j({})},E=async t=>{try{let{error:a}=await l.N.from("reviews").update({reviewer_name:h.reviewer_name,rating:h.rating,review_text:h.review_text,updated_at:new Date().toISOString()}).eq("id",t);if(a)throw a;s(e.map(e=>e.id===t?{...e,reviewer_name:h.reviewer_name||e.reviewer_name,rating:h.rating||e.rating,review_text:h.review_text||e.review_text}:e)),u(null),j({}),b({title:"Success",description:"Review updated successfully"})}catch(e){b({title:"Error",description:"Failed to update review",variant:"destructive"})}},P=async t=>{if(confirm("Are you sure you want to delete this review?"))try{let{error:a}=await l.N.from("reviews").delete().eq("id",t);if(a)throw a;s(e.filter(e=>e.id!==t)),b({title:"Success",description:"Review deleted successfully"})}catch(e){b({title:"Error",description:"Failed to delete review",variant:"destructive"})}},D=function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=arguments.length>2?arguments[2]:void 0;return(0,a.jsx)("div",{className:"flex",children:[1,2,3,4,5].map(r=>(0,a.jsx)("button",{type:"button",disabled:!s,onClick:()=>s&&t&&t(r),className:"h-4 w-4 transition-colors ".concat(s?"cursor-pointer hover:scale-110":"cursor-default"),children:(0,a.jsx)(x.A,{className:"h-4 w-4 ".concat(r<=e?"text-yellow-400 fill-current":"text-gray-300")})},r))})};return c?(0,a.jsx)("div",{className:"text-center py-8",children:"Loading reviews..."}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Reviews Management"}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Total Reviews: ",e.length," | Approved: ",e.filter(e=>e.is_approved).length," | Pending: ",e.filter(e=>!e.is_approved).length," | Featured: ",e.filter(e=>e.is_featured).length]})]}),(0,a.jsx)("div",{className:"grid gap-4",children:e.map(e=>{var s;let r=(s=e.order_id)?t.find(e=>e.id===s):null,l=m===e.id;return(0,a.jsxs)(v.Zp,{children:[(0,a.jsx)(v.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[l?(0,a.jsx)(f.p,{value:h.reviewer_name||e.reviewer_name,onChange:e=>j(s=>({...s,reviewer_name:e.target.value})),className:"text-lg font-semibold"}):(0,a.jsx)(v.ZB,{className:"text-lg",children:e.reviewer_name}),(0,a.jsx)("div",{className:"flex items-center gap-2 mt-1",children:l?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[D(h.rating||e.rating,!0,e=>j(s=>({...s,rating:e}))),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[h.rating||e.rating,"/5"]})]}):(0,a.jsxs)(a.Fragment,{children:[D(e.rating),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[e.rating,"/5"]})]})})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[e.is_approved?(0,a.jsxs)(g.E,{variant:"default",children:[(0,a.jsx)(w.A,{className:"mr-1 h-3 w-3"}),"Approved"]}):(0,a.jsxs)(g.E,{variant:"secondary",children:[(0,a.jsx)(S.A,{className:"mr-1 h-3 w-3"}),"Pending"]}),e.is_featured&&(0,a.jsxs)(g.E,{variant:"default",children:[(0,a.jsx)(x.A,{className:"mr-1 h-3 w-3"}),"Featured"]})]})]})}),(0,a.jsx)(v.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Email:"})," ",e.reviewer_email]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Date:"})," ",new Date(e.created_at).toLocaleDateString()]})]}),r&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(ee.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Order:"})," ",r.service_type]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Status: ",r.status," | ",new Date(r.created_at).toLocaleDateString()]})]}),(0,a.jsx)(d.$,{variant:"ghost",size:"sm",onClick:()=>y(p===e.id?null:e.id),children:(0,a.jsx)(_.A,{className:"h-4 w-4"})})]})]}),p===e.id&&r&&(0,a.jsxs)("div",{className:"p-3 bg-muted/30 rounded-md border-l-4 border-primary",children:[(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"Order Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Customer:"})," ",r.customer_name]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Service:"})," ",r.service_type]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Status:"})," ",r.status]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Order Date:"})," ",new Date(r.created_at).toLocaleDateString()]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:(0,a.jsx)("strong",{children:"Review:"})}),l?(0,a.jsx)(N.T,{value:h.review_text||e.review_text,onChange:e=>j(s=>({...s,review_text:e.target.value})),className:"mt-1 min-h-[100px]"}):(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1 p-3 bg-muted rounded",children:e.review_text})]}),(0,a.jsxs)("div",{className:"flex items-center gap-6 pt-4 border-t",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(L,{id:"approved-".concat(e.id),checked:e.is_approved,onCheckedChange:s=>A(e.id,"is_approved",s)}),(0,a.jsx)(T.J,{htmlFor:"approved-".concat(e.id),children:"Approved"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(L,{id:"featured-".concat(e.id),checked:e.is_featured,onCheckedChange:s=>A(e.id,"is_featured",s),disabled:!e.is_approved}),(0,a.jsx)(T.J,{htmlFor:"featured-".concat(e.id),children:"Featured"})]}),l?(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(d.$,{variant:"default",size:"sm",onClick:()=>E(e.id),children:[(0,a.jsx)(M.A,{className:"h-4 w-4 mr-1"}),"Save"]}),(0,a.jsxs)(d.$,{variant:"outline",size:"sm",onClick:F,children:[(0,a.jsx)(z.A,{className:"h-4 w-4 mr-1"}),"Cancel"]})]}):(0,a.jsxs)(d.$,{variant:"outline",size:"sm",onClick:()=>{u(e.id),j({reviewer_name:e.reviewer_name,rating:e.rating,review_text:e.review_text})},children:[(0,a.jsx)(es.A,{className:"h-4 w-4 mr-1"}),"Edit"]}),(0,a.jsx)(d.$,{variant:"outline",size:"sm",onClick:()=>P(e.id),children:(0,a.jsx)(H.A,{className:"h-4 w-4"})})]})]})})]},e.id)})}),0===e.length&&(0,a.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"No reviews found."})]})}var ea=t(8194);let er=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(ea.bL,{ref:s,className:(0,q.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...r})});er.displayName=ea.bL.displayName;let el=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(ea._V,{ref:s,className:(0,q.cn)("aspect-square h-full w-full",t),...r})});el.displayName=ea._V.displayName;let ei=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(ea.H4,{ref:s,className:(0,q.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...r})});ei.displayName=ea.H4.displayName;var en=t(2671);function ed(){let[e,s]=(0,r.useState)([]),[t,i]=(0,r.useState)(!0),{toast:d}=(0,n.dj)();(0,r.useEffect)(()=>{c()},[]);let c=async()=>{try{let{data:{session:e}}=await l.N.auth.getSession();if(!e)throw Error("Not authenticated");let[{data:t,error:a},{data:r,error:i}]=await Promise.all([l.N.from("profiles").select("*"),l.N.from("user_roles").select("user_id, role")]);if(a)throw a;if(i)throw i;let n=new Map;(r||[]).forEach(e=>{let s=n.get(e.user_id);"admin"!==s&&n.set(e.user_id,e.role)});let d=(t||[]).map(e=>({id:e.id,user_id:e.user_id,display_name:e.display_name,avatar_url:e.avatar_url,created_at:e.created_at,email:"Email hidden (security)",role:n.get(e.user_id)||"user"}));s(d)}catch(e){d({title:"Error",description:"Failed to fetch users",variant:"destructive"})}finally{i(!1)}},m=async(t,a)=>{try{await l.N.from("user_roles").delete().eq("user_id",t);let{error:r}=await l.N.from("user_roles").insert([{user_id:t,role:a}]);if(r)throw r;s(e.map(e=>e.user_id===t?{...e,role:a}:e)),d({title:"Success",description:"User role updated successfully"})}catch(e){d({title:"Error",description:"Failed to update user role",variant:"destructive"})}};return t?(0,a.jsx)("div",{className:"text-center py-8",children:"Loading users..."}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Users Management"}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Total Users: ",e.length," | Admins: ",e.filter(e=>"admin"===e.role).length," | Users: ",e.filter(e=>"user"===e.role).length]})]}),(0,a.jsx)("div",{className:"grid gap-4",children:e.map(e=>(0,a.jsxs)(v.Zp,{children:[(0,a.jsx)(v.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(er,{children:[(0,a.jsx)(el,{src:e.avatar_url}),(0,a.jsx)(ei,{children:(0,a.jsx)(en.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(v.ZB,{className:"text-lg",children:e.display_name||"No name set"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.email})]})]}),(0,a.jsx)(g.E,{variant:"admin"===e.role?"default":"secondary",children:"admin"===e.role?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.A,{className:"mr-1 h-3 w-3"}),"Admin"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(en.A,{className:"mr-1 h-3 w-3"}),"User"]})})]})}),(0,a.jsx)(v.Wu,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(0,a.jsx)("strong",{children:"Joined:"})," ",new Date(e.created_at).toLocaleDateString()]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(0,a.jsx)("strong",{children:"User ID:"})," ",e.user_id.slice(0,8),"..."]})]}),(0,a.jsx)("div",{className:"flex items-center gap-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Role:"}),(0,a.jsxs)(y.l6,{value:e.role,onValueChange:s=>m(e.user_id,s),children:[(0,a.jsx)(y.bq,{className:"w-32",children:(0,a.jsx)(y.yv,{})}),(0,a.jsxs)(y.gC,{children:[(0,a.jsx)(y.eb,{value:"user",children:"User"}),(0,a.jsx)(y.eb,{value:"admin",children:"Admin"})]})]})]})})]})})]},e.id))}),0===e.length&&(0,a.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"No users found."})]})}function ec(){let[e,s]=(0,r.useState)(null),[t,v]=(0,r.useState)(null),[g,f]=(0,r.useState)(!0),N=(0,i.Zp)(),{toast:y}=(0,n.dj)();(0,r.useEffect)(()=>{(async()=>{try{let{data:{session:e}}=await l.N.auth.getSession();if(null==e||!e.user)return void N("/auth?admin=1");{s(e.user);let{data:t}=await l.N.from("user_roles").select("role").eq("user_id",e.user.id).maybeSingle();if((null==t?void 0:t.role)==="admin")v("admin");else{y({title:"Access Denied",description:"You don't have admin permissions.",variant:"destructive"}),N("/");return}}}catch(e){console.error("Auth error:",e),N("/auth?admin=1")}finally{f(!1)}let{data:{subscription:e}}=l.N.auth.onAuthStateChange(async(e,s)=>{"SIGNED_OUT"===e&&N("/auth?admin=1")});return()=>e.unsubscribe()})()},[N,y]);let b=async()=>{await l.N.auth.signOut(),N("/"),y({title:"Signed Out",description:"You have been signed out successfully."})};return g?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),(0,a.jsx)("p",{className:"mt-2 text-muted-foreground",children:"Loading admin panel..."})]})}):e&&"admin"===t?(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-background via-secondary/5 to-background",children:[(0,a.jsx)("header",{className:"border-b bg-background/80 backdrop-blur-sm sticky top-0 z-50",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.A,{className:"h-6 w-6 text-primary"}),(0,a.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"Admin Panel"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Welcome, ",e.email]}),(0,a.jsx)(d.$,{variant:"outline",onClick:()=>N("/"),children:"View Site"}),(0,a.jsxs)(d.$,{variant:"outline",onClick:b,children:[(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Sign Out"]})]})]})}),(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)(c.tU,{defaultValue:"orders",className:"space-y-6",children:[(0,a.jsxs)(c.j7,{className:"grid w-full grid-cols-5",children:[(0,a.jsxs)(c.Xi,{value:"orders",className:"flex items-center gap-2",children:[(0,a.jsx)(u.A,{className:"h-4 w-4"}),"Orders"]}),(0,a.jsxs)(c.Xi,{value:"content",className:"flex items-center gap-2",children:[(0,a.jsx)(h.A,{className:"h-4 w-4"}),"Content"]}),(0,a.jsxs)(c.Xi,{value:"projects",className:"flex items-center gap-2",children:[(0,a.jsx)(x.A,{className:"h-4 w-4"}),"Projects"]}),(0,a.jsxs)(c.Xi,{value:"reviews",className:"flex items-center gap-2",children:[(0,a.jsx)(j.A,{className:"h-4 w-4"}),"Reviews"]}),(0,a.jsxs)(c.Xi,{value:"users",className:"flex items-center gap-2",children:[(0,a.jsx)(p.A,{className:"h-4 w-4"}),"Users"]})]}),(0,a.jsx)(c.av,{value:"orders",children:(0,a.jsx)(O,{})}),(0,a.jsx)(c.av,{value:"content",children:(0,a.jsx)(G,{})}),(0,a.jsx)(c.av,{value:"projects",children:(0,a.jsx)(Q,{})}),(0,a.jsx)(c.av,{value:"reviews",children:(0,a.jsx)(et,{})}),(0,a.jsx)(c.av,{value:"users",children:(0,a.jsx)(ed,{})})]})})]}):null}},7072:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/Admin",function(){return t(2515)}])}},e=>{e.O(0,[796,382,307,203,858,870,636,593,792],()=>e(e.s=7072)),_N_E=e.O()}]);